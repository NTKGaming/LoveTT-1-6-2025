<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
  // Khởi tạo EmailJS
  (function () {
    emailjs.init("wKfRxI-G5jn8WicaO"); // public key của bạn
  })();

  const yes = document.getElementById('yes');
  const no = document.getElementById('no');
  const gif = document.getElementById('gif');
  const gif2 = document.getElementById('gif2');
  const gif3 = document.getElementById('gif3');
  const text = document.getElementById('loveMessage');
  const h1 = document.getElementById('h1');
  const h2 = document.getElementById('h2');

  // Hàm gửi email
  function sendEmail(answer) {
    const templateParams = {
      user_name: "Bé Thiên",
      answer: answer,
      timestamp: new Date().toLocaleString(),
    };

    emailjs
      .send("service_qxu6r0h", "template_tennguoidung", templateParams)
      .then((response) => {
        console.log("Email sent successfully!", response.status, response.text);
      })
      .catch((error) => {
        console.error("Email send error:", error);
      });
  }

  no.addEventListener('click', () => {
    const x = Math.floor(Math.random() * (window.innerWidth - 200));
    const y = Math.floor(Math.random() * (window.innerHeight - 400));
    no.style.left = `${x}px`;
    no.style.top = `${y}px`;

    gif.style.display = 'none';
    gif2.style.display = 'flex';

    console.log('Bé Thiên đã từ chối lời tỏ tình của bạn');
    sendEmail("Bé Thiên đã từ chối lời tỏ tình của bạn");

    setTimeout(() => {
      gif.style.display = 'flex';
      gif2.style.display = 'none';
    }, 500);
  });

  yes.addEventListener('click', () => {
    gif.style.display = 'none';
    gif2.style.display = 'none';
    gif3.style.display = 'flex';
    yes.style.display = 'none';
    no.style.display = 'none';
    text.style.display = 'flex';
    text.classList.add('animate');
    h1.style.display = 'none';
    h2.style.display = 'block';

    console.log('Bé Thiên đã chấp nhận lời tỏ tình của bạn');
    sendEmail("Bé Thiên đã chấp nhận lời tỏ tình của bạn");
  });
</script>
